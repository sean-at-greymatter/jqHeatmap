/*
 * 
 * Heatmap 1.0 - JQuery table heatmap
 * Version 1.0
 * @requires jQuery v1.8
 * 
 * Copyright (c) 2012 Sean Wilson & Grey Matter Ltd.
 */
(function(e){e.fn.heatmap=function(t){var n=e.extend({colExclude:null,colourMin:[240,128,128],colourMid:[240,224,127],colourMax:[64,192,127],ignoreChars:/[\,$£]/},t);return this.each(function(){var t=n.colExclude,r=n.colourMin,i=n.colourMid,s=n.colourMax,o=0,u=0,a=0,f=0,l=0,c=0,h=0;var p=e(this);e("tbody tr",p).each(function(){h=0;c=0;e(this).find("td").each(function(){if(t==null||e.inArray(this.cellIndex,t)==-1){l=e(this).text().replace(n.ignoreChars,"");l=parseFloat(l);if(l>h){h=l}else if(l<c){c=l}}});e(this).find("td").each(function(){if(t==null||e.inArray(this.cellIndex,t)==-1){l=e(this).text().replace(n.ignoreChars,"");l=parseFloat(l);f=parseInt(Math.round(100*(l-c)/(h-c)).toFixed(0));if(f<=50){f=f/50;o=parseInt((r[0]+f*(i[0]-r[0])).toFixed(0));u=parseInt((r[1]+f*(i[1]-r[1])).toFixed(0));a=parseInt((r[2]+f*(i[2]-r[2])).toFixed(0))}else{f=f/50-1;o=parseInt((i[0]+f*(s[0]-i[0])).toFixed(0));u=parseInt((i[1]+f*(s[1]-i[1])).toFixed(0));a=parseInt((i[2]+f*(s[2]-i[2])).toFixed(0))}clr="rgb("+o+","+u+","+a+")";e(this).css({backgroundColor:clr})}})})})}})(jQuery)
